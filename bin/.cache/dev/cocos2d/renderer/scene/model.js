(function () {
    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
    var __module = nodeEnv ? module : { exports: {} };
    var __filename = 'engine-dev/cocos2d/renderer/scene/model.js';
    var __require = nodeEnv ? function (request) {
        return require(request);
    } : function (request) {
        return __quick_compile__.require(request, __filename);
    };
    function __define(exports, require, module) {
        if (!nodeEnv) {
            __quick_compile__.registerModule(__filename, module);
        }
                'use strict';
        Object.defineProperty(exports, '__esModule', { value: true });
        var _createClass = function () {
            function defineProperties(target, props) {
                for (var i = 0; i < props.length; i++) {
                    var descriptor = props[i];
                    descriptor.enumerable = descriptor.enumerable || false;
                    descriptor.configurable = true;
                    if ('value' in descriptor)
                        descriptor.writable = true;
                    Object.defineProperty(target, descriptor.key, descriptor);
                }
            }
            return function (Constructor, protoProps, staticProps) {
                if (protoProps)
                    defineProperties(Constructor.prototype, protoProps);
                if (staticProps)
                    defineProperties(Constructor, staticProps);
                return Constructor;
            };
        }();
        function _classCallCheck(instance, Constructor) {
            if (!(instance instanceof Constructor)) {
                throw new TypeError('Cannot call a class as a function');
            }
        }
        var Model = function () {
            function Model() {
                _classCallCheck(this, Model);
                this._type = 'default';
                this._poolID = -1;
                this._node = null;
                this._inputAssembler = null;
                this._effect = null;
                this._viewID = -1;
                this._cameraID = -1;
                this._userKey = -1;
                this._castShadow = false;
                this._boundingShape = null;
                this._defines = [];
                this._uniforms = [];
            }
            _createClass(Model, [
                {
                    key: 'setNode',
                    value: function setNode(node) {
                        this._node = node;
                    }
                },
                {
                    key: 'setInputAssembler',
                    value: function setInputAssembler(ia) {
                        this._inputAssembler = ia;
                    }
                },
                {
                    key: 'setEffect',
                    value: function setEffect(effect, customProperties) {
                        this._effect = effect;
                        var defines = this._defines;
                        var uniforms = this._uniforms;
                        defines.length = 0;
                        uniforms.length = 0;
                        if (effect) {
                            defines.push(effect._defines);
                            uniforms.push(effect._properties);
                        }
                        if (customProperties) {
                            defines.push(customProperties._defines);
                            uniforms.push(customProperties._properties);
                        }
                    }
                },
                {
                    key: 'setUserKey',
                    value: function setUserKey(key) {
                        this._userKey = key;
                    }
                },
                {
                    key: 'extractDrawItem',
                    value: function extractDrawItem(out) {
                        out.model = this;
                        out.node = this._node;
                        out.ia = this._inputAssembler;
                        out.effect = this._effect;
                        out.defines = this._defines;
                        out.dependencies = this._dependencies;
                        out.uniforms = this._uniforms;
                    }
                }
            ]);
            return Model;
        }();
        exports.default = Model;
        module.exports = exports['default'];
    }
    if (nodeEnv) {
        __define(__module.exports, __require, __module);
    } else {
        __quick_compile__.registerModuleFunc(__filename, function () {
            __define(__module.exports, __require, __module);
        });
    }
}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGVsLmpzIiwiL1VzZXJzL2dhb3lhbmcvV29ya1NwYWNlL2pveWNhc3RsZS9iaW5nby9jbGllbnQvYmluZ28vZW5naW5lL2NvY29zMmQvcmVuZGVyZXIvc2NlbmUvbW9kZWwuanMiXSwibmFtZXMiOlsiTW9kZWwiLCJfdHlwZSIsIl9wb29sSUQiLCJfbm9kZSIsIl9pbnB1dEFzc2VtYmxlciIsIl9lZmZlY3QiLCJfdmlld0lEIiwiX2NhbWVyYUlEIiwiX3VzZXJLZXkiLCJfY2FzdFNoYWRvdyIsIl9ib3VuZGluZ1NoYXBlIiwiX2RlZmluZXMiLCJfdW5pZm9ybXMiLCJub2RlIiwiaWEiLCJlZmZlY3QiLCJjdXN0b21Qcm9wZXJ0aWVzIiwiZGVmaW5lcyIsInVuaWZvcm1zIiwibGVuZ3RoIiwicHVzaCIsIl9wcm9wZXJ0aWVzIiwia2V5Iiwib3V0IiwibW9kZWwiLCJkZXBlbmRlbmNpZXMiLCJfZGVwZW5kZW5jaWVzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7SUFBQSxTQUFBLFFBQUEsQ0FBQSxPQUFBLEVBQUEsT0FBQSxFQUFBLE1BQUEsRUFBQTtBQUFBOztTQUFBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1lBS3FCQSxLQUFBQTtZQUluQixTQUFBLEtBQUEsR0FBYztBQUFBLGdCQUFBLGVBQUEsQ0FBQSxJQUFBLEVBQUEsS0FBQSxFQUFBO0FBQUEsZ0JBQ1osS0FBS0MsS0FBTCxHQUFhLFNBQWIsQ0FEWTtBQUFBLGdCQUVaLEtBQUtDLE9BQUwsR0FBZSxDQUFDLENBQWhCLENBRlk7QUFBQSxnQkFHWixLQUFLQyxLQUFMLEdBQWEsSUFBYixDQUhZO0FBQUEsZ0JBSVosS0FBS0MsZUFBTCxHQUF1QixJQUF2QixDQUpZO0FBQUEsZ0JBS1osS0FBS0MsT0FBTCxHQUFlLElBQWYsQ0FMWTtBQUFBLGdCQU1aLEtBQUtDLE9BQUwsR0FBZSxDQUFDLENBQWhCLENBTlk7QUFBQSxnQkFPWixLQUFLQyxTQUFMLEdBQWlCLENBQUMsQ0FBbEIsQ0FQWTtBQUFBLGdCQVFaLEtBQUtDLFFBQUwsR0FBZ0IsQ0FBQyxDQUFqQixDQVJZO0FBQUEsZ0JBU1osS0FBS0MsV0FBTCxHQUFtQixLQUFuQixDQVRZO0FBQUEsZ0JBVVosS0FBS0MsY0FBTCxHQUFzQixJQUF0QixDQVZZO0FBQUEsZ0JBZVosS0FBS0MsUUFBTCxHQUFnQixFQUFoQixDQWZZO0FBQUEsZ0JBZ0JaLEtBQUtDLFNBQUwsR0FBaUIsRUFBakIsQ0FoQlk7QUFBQTs7Ozs0Q0F1Qk5DLE1BQU07QUFBQSx3QkFDWixLQUFLVixLQUFMLEdBQWFVLElBQWIsQ0FEWTtBQUFBOzs7O3NEQVFJQyxJQUFJO0FBQUEsd0JBQ3BCLEtBQUtWLGVBQUwsR0FBdUJVLEVBQXZCLENBRG9CO0FBQUE7Ozs7OENBUVpDLFFBQVFDLGtCQUFrQjtBQUFBLHdCQUNsQyxLQUFLWCxPQUFMLEdBQWVVLE1BQWYsQ0FEa0M7QUFBQSx3QkFHbEMsSUFBSUUsT0FBQUEsR0FBVSxLQUFLTixRQUFuQixDQUhrQztBQUFBLHdCQUlsQyxJQUFJTyxRQUFBQSxHQUFXLEtBQUtOLFNBQXBCLENBSmtDO0FBQUEsd0JBTWxDSyxPQUFBQSxDQUFRRSxNQUFSRixHQUFpQixDQUFqQkEsQ0FOa0M7QUFBQSx3QkFPbENDLFFBQUFBLENBQVNDLE1BQVRELEdBQWtCLENBQWxCQSxDQVBrQztBQUFBLHdCQVNsQyxJQUFJSCxNQUFKLEVBQVk7QUFBQSw0QkFDVkUsT0FBQUEsQ0FBUUcsSUFBUkgsQ0FBYUYsTUFBQUEsQ0FBT0osUUFBcEJNLEVBRFU7QUFBQSw0QkFFVkMsUUFBQUEsQ0FBU0UsSUFBVEYsQ0FBY0gsTUFBQUEsQ0FBT00sV0FBckJILEVBRlU7QUFBQSx5QkFUc0I7QUFBQSx3QkFjbEMsSUFBSUYsZ0JBQUosRUFBc0I7QUFBQSw0QkFDcEJDLE9BQUFBLENBQVFHLElBQVJILENBQWFELGdCQUFBQSxDQUFpQkwsUUFBOUJNLEVBRG9CO0FBQUEsNEJBRXBCQyxRQUFBQSxDQUFTRSxJQUFURixDQUFjRixnQkFBQUEsQ0FBaUJLLFdBQS9CSCxFQUZvQjtBQUFBLHlCQWRZO0FBQUE7Ozs7K0NBd0J6QkksS0FBSztBQUFBLHdCQUNkLEtBQUtkLFFBQUwsR0FBZ0JjLEdBQWhCLENBRGM7QUFBQTs7OztvREFRQUMsS0FBSztBQUFBLHdCQUNuQkEsR0FBQUEsQ0FBSUMsS0FBSkQsR0FBWSxJQUFaQSxDQURtQjtBQUFBLHdCQUVuQkEsR0FBQUEsQ0FBSVYsSUFBSlUsR0FBVyxLQUFLcEIsS0FBaEJvQixDQUZtQjtBQUFBLHdCQUduQkEsR0FBQUEsQ0FBSVQsRUFBSlMsR0FBUyxLQUFLbkIsZUFBZG1CLENBSG1CO0FBQUEsd0JBSW5CQSxHQUFBQSxDQUFJUixNQUFKUSxHQUFhLEtBQUtsQixPQUFsQmtCLENBSm1CO0FBQUEsd0JBS25CQSxHQUFBQSxDQUFJTixPQUFKTSxHQUFjLEtBQUtaLFFBQW5CWSxDQUxtQjtBQUFBLHdCQU1uQkEsR0FBQUEsQ0FBSUUsWUFBSkYsR0FBbUIsS0FBS0csYUFBeEJILENBTm1CO0FBQUEsd0JBT25CQSxHQUFBQSxDQUFJTCxRQUFKSyxHQUFlLEtBQUtYLFNBQXBCVyxDQVBtQjtBQUFBOzs7OzswQkEzRUZ2Qjs0Q0FMckI7QUFBQTs7O1dBTUU7QUFBQTs7V0FBQTtBQUFBIiwiZmlsZSI6Im1vZGVsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE3LTIwMTggWGlhbWVuIFlhamkgU29mdHdhcmUgQ28uLCBMdGQuXG5cbi8qKlxuICogQSByZXByZXNlbnRhdGlvbiBvZiBhIG1vZGVsXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGVsIHtcbiAgLyoqXG4gICAqIFNldHVwIGEgZGVmYXVsdCBlbXB0eSBtb2RlbFxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fdHlwZSA9ICdkZWZhdWx0JztcbiAgICB0aGlzLl9wb29sSUQgPSAtMTtcbiAgICB0aGlzLl9ub2RlID0gbnVsbDtcbiAgICB0aGlzLl9pbnB1dEFzc2VtYmxlciA9IG51bGw7XG4gICAgdGhpcy5fZWZmZWN0ID0gbnVsbDtcbiAgICB0aGlzLl92aWV3SUQgPSAtMTtcbiAgICB0aGlzLl9jYW1lcmFJRCA9IC0xO1xuICAgIHRoaXMuX3VzZXJLZXkgPSAtMTtcbiAgICB0aGlzLl9jYXN0U2hhZG93ID0gZmFsc2U7XG4gICAgdGhpcy5fYm91bmRpbmdTaGFwZSA9IG51bGw7XG5cbiAgICAvLyBPcmlnaW5hbGx5IG1vZGVsIGRvIE9iamVjdC5jcmVhdGUobnVsbCkgYW5kIFxuICAgIC8vIGNvcHkgdmFsdWVzIGZyb20gZWZmZWN0IGFuZCBjdXN0b21Qcm9wZXJ0aWVzIGV2ZXJ5IHRpbWUgd2hlbiBjYWxsIHNldEVmZmVjdCxcbiAgICAvLyB0aGlzIHdpbGwgY2F1c2UgZ2MgcGVyZm9ybWFuY2UsIHNvIGNoYW5nZSB0byBBcnJheSB0eXBlIHRvIHN0b3JlIHZhbHVlcy5cbiAgICB0aGlzLl9kZWZpbmVzID0gW107XG4gICAgdGhpcy5fdW5pZm9ybXMgPSBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGhvc3Rpbmcgbm9kZSBvZiB0aGlzIG1vZGVsXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSB0aGUgaG9zdGluZyBub2RlXG4gICAqL1xuICBzZXROb2RlKG5vZGUpIHtcbiAgICB0aGlzLl9ub2RlID0gbm9kZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGlucHV0IGFzc2VtYmxlclxuICAgKiBAcGFyYW0ge0lucHV0QXNzZW1ibGVyfSBpYVxuICAgKi9cbiAgc2V0SW5wdXRBc3NlbWJsZXIoaWEpIHtcbiAgICB0aGlzLl9pbnB1dEFzc2VtYmxlciA9IGlhO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgbW9kZWwgZWZmZWN0XG4gICAqIEBwYXJhbSB7P0VmZmVjdH0gZWZmZWN0IHRoZSBlZmZlY3QgdG8gdXNlXG4gICAqL1xuICBzZXRFZmZlY3QoZWZmZWN0LCBjdXN0b21Qcm9wZXJ0aWVzKSB7XG4gICAgdGhpcy5fZWZmZWN0ID0gZWZmZWN0O1xuXG4gICAgbGV0IGRlZmluZXMgPSB0aGlzLl9kZWZpbmVzO1xuICAgIGxldCB1bmlmb3JtcyA9IHRoaXMuX3VuaWZvcm1zO1xuICAgIFxuICAgIGRlZmluZXMubGVuZ3RoID0gMDtcbiAgICB1bmlmb3Jtcy5sZW5ndGggPSAwO1xuICAgIFxuICAgIGlmIChlZmZlY3QpIHtcbiAgICAgIGRlZmluZXMucHVzaChlZmZlY3QuX2RlZmluZXMpO1xuICAgICAgdW5pZm9ybXMucHVzaChlZmZlY3QuX3Byb3BlcnRpZXMpO1xuICAgIH1cblxuICAgIGlmIChjdXN0b21Qcm9wZXJ0aWVzKSB7XG4gICAgICBkZWZpbmVzLnB1c2goY3VzdG9tUHJvcGVydGllcy5fZGVmaW5lcyk7XG4gICAgICB1bmlmb3Jtcy5wdXNoKGN1c3RvbVByb3BlcnRpZXMuX3Byb3BlcnRpZXMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHVzZXIga2V5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBrZXlcbiAgICovXG4gIHNldFVzZXJLZXkoa2V5KSB7XG4gICAgdGhpcy5fdXNlcktleSA9IGtleTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IGEgZHJhd2luZyBpdGVtXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvdXQgdGhlIHJlY2VpdmluZyBpdGVtXG4gICAqL1xuICBleHRyYWN0RHJhd0l0ZW0ob3V0KSB7XG4gICAgb3V0Lm1vZGVsID0gdGhpcztcbiAgICBvdXQubm9kZSA9IHRoaXMuX25vZGU7XG4gICAgb3V0LmlhID0gdGhpcy5faW5wdXRBc3NlbWJsZXI7XG4gICAgb3V0LmVmZmVjdCA9IHRoaXMuX2VmZmVjdDtcbiAgICBvdXQuZGVmaW5lcyA9IHRoaXMuX2RlZmluZXM7XG4gICAgb3V0LmRlcGVuZGVuY2llcyA9IHRoaXMuX2RlcGVuZGVuY2llcztcbiAgICBvdXQudW5pZm9ybXMgPSB0aGlzLl91bmlmb3JtcztcbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTctMjAxOCBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC5cblxuLyoqXG4gKiBBIHJlcHJlc2VudGF0aW9uIG9mIGEgbW9kZWxcbiAqL1xudmFyIE1vZGVsID0gZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogU2V0dXAgYSBkZWZhdWx0IGVtcHR5IG1vZGVsXG4gICAqL1xuICBmdW5jdGlvbiBNb2RlbCgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTW9kZWwpO1xuXG4gICAgdGhpcy5fdHlwZSA9ICdkZWZhdWx0JztcbiAgICB0aGlzLl9wb29sSUQgPSAtMTtcbiAgICB0aGlzLl9ub2RlID0gbnVsbDtcbiAgICB0aGlzLl9pbnB1dEFzc2VtYmxlciA9IG51bGw7XG4gICAgdGhpcy5fZWZmZWN0ID0gbnVsbDtcbiAgICB0aGlzLl92aWV3SUQgPSAtMTtcbiAgICB0aGlzLl9jYW1lcmFJRCA9IC0xO1xuICAgIHRoaXMuX3VzZXJLZXkgPSAtMTtcbiAgICB0aGlzLl9jYXN0U2hhZG93ID0gZmFsc2U7XG4gICAgdGhpcy5fYm91bmRpbmdTaGFwZSA9IG51bGw7XG5cbiAgICAvLyBPcmlnaW5hbGx5IG1vZGVsIGRvIE9iamVjdC5jcmVhdGUobnVsbCkgYW5kIFxuICAgIC8vIGNvcHkgdmFsdWVzIGZyb20gZWZmZWN0IGFuZCBjdXN0b21Qcm9wZXJ0aWVzIGV2ZXJ5IHRpbWUgd2hlbiBjYWxsIHNldEVmZmVjdCxcbiAgICAvLyB0aGlzIHdpbGwgY2F1c2UgZ2MgcGVyZm9ybWFuY2UsIHNvIGNoYW5nZSB0byBBcnJheSB0eXBlIHRvIHN0b3JlIHZhbHVlcy5cbiAgICB0aGlzLl9kZWZpbmVzID0gW107XG4gICAgdGhpcy5fdW5pZm9ybXMgPSBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGhvc3Rpbmcgbm9kZSBvZiB0aGlzIG1vZGVsXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSB0aGUgaG9zdGluZyBub2RlXG4gICAqL1xuXG5cbiAgX2NyZWF0ZUNsYXNzKE1vZGVsLCBbe1xuICAgIGtleTogJ3NldE5vZGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXROb2RlKG5vZGUpIHtcbiAgICAgIHRoaXMuX25vZGUgPSBub2RlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgaW5wdXQgYXNzZW1ibGVyXG4gICAgICogQHBhcmFtIHtJbnB1dEFzc2VtYmxlcn0gaWFcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnc2V0SW5wdXRBc3NlbWJsZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRJbnB1dEFzc2VtYmxlcihpYSkge1xuICAgICAgdGhpcy5faW5wdXRBc3NlbWJsZXIgPSBpYTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG1vZGVsIGVmZmVjdFxuICAgICAqIEBwYXJhbSB7P0VmZmVjdH0gZWZmZWN0IHRoZSBlZmZlY3QgdG8gdXNlXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3NldEVmZmVjdCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldEVmZmVjdChlZmZlY3QsIGN1c3RvbVByb3BlcnRpZXMpIHtcbiAgICAgIHRoaXMuX2VmZmVjdCA9IGVmZmVjdDtcblxuICAgICAgdmFyIGRlZmluZXMgPSB0aGlzLl9kZWZpbmVzO1xuICAgICAgdmFyIHVuaWZvcm1zID0gdGhpcy5fdW5pZm9ybXM7XG5cbiAgICAgIGRlZmluZXMubGVuZ3RoID0gMDtcbiAgICAgIHVuaWZvcm1zLmxlbmd0aCA9IDA7XG5cbiAgICAgIGlmIChlZmZlY3QpIHtcbiAgICAgICAgZGVmaW5lcy5wdXNoKGVmZmVjdC5fZGVmaW5lcyk7XG4gICAgICAgIHVuaWZvcm1zLnB1c2goZWZmZWN0Ll9wcm9wZXJ0aWVzKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGN1c3RvbVByb3BlcnRpZXMpIHtcbiAgICAgICAgZGVmaW5lcy5wdXNoKGN1c3RvbVByb3BlcnRpZXMuX2RlZmluZXMpO1xuICAgICAgICB1bmlmb3Jtcy5wdXNoKGN1c3RvbVByb3BlcnRpZXMuX3Byb3BlcnRpZXMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdXNlciBrZXlcbiAgICAgKiBAcGFyYW0ge251bWJlcn0ga2V5XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3NldFVzZXJLZXknLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRVc2VyS2V5KGtleSkge1xuICAgICAgdGhpcy5fdXNlcktleSA9IGtleTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHRyYWN0IGEgZHJhd2luZyBpdGVtXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG91dCB0aGUgcmVjZWl2aW5nIGl0ZW1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnZXh0cmFjdERyYXdJdGVtJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZXh0cmFjdERyYXdJdGVtKG91dCkge1xuICAgICAgb3V0Lm1vZGVsID0gdGhpcztcbiAgICAgIG91dC5ub2RlID0gdGhpcy5fbm9kZTtcbiAgICAgIG91dC5pYSA9IHRoaXMuX2lucHV0QXNzZW1ibGVyO1xuICAgICAgb3V0LmVmZmVjdCA9IHRoaXMuX2VmZmVjdDtcbiAgICAgIG91dC5kZWZpbmVzID0gdGhpcy5fZGVmaW5lcztcbiAgICAgIG91dC5kZXBlbmRlbmNpZXMgPSB0aGlzLl9kZXBlbmRlbmNpZXM7XG4gICAgICBvdXQudW5pZm9ybXMgPSB0aGlzLl91bmlmb3JtcztcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTW9kZWw7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IE1vZGVsO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnpiM1Z5WTJWeklqcGJJbTF2WkdWc0xtcHpJbDBzSW01aGJXVnpJanBiSWsxdlpHVnNJaXdpWDNSNWNHVWlMQ0pmY0c5dmJFbEVJaXdpWDI1dlpHVWlMQ0pmYVc1d2RYUkJjM05sYldKc1pYSWlMQ0pmWldabVpXTjBJaXdpWDNacFpYZEpSQ0lzSWw5allXMWxjbUZKUkNJc0lsOTFjMlZ5UzJWNUlpd2lYMk5oYzNSVGFHRmtiM2NpTENKZlltOTFibVJwYm1kVGFHRndaU0lzSWw5a1pXWnBibVZ6SWl3aVgzVnVhV1p2Y20xeklpd2libTlrWlNJc0ltbGhJaXdpWldabVpXTjBJaXdpWTNWemRHOXRVSEp2Y0dWeWRHbGxjeUlzSW1SbFptbHVaWE1pTENKMWJtbG1iM0p0Y3lJc0lteGxibWQwYUNJc0luQjFjMmdpTENKZmNISnZjR1Z5ZEdsbGN5SXNJbXRsZVNJc0ltOTFkQ0lzSW0xdlpHVnNJaXdpWkdWd1pXNWtaVzVqYVdWeklpd2lYMlJsY0dWdVpHVnVZMmxsY3lKZExDSnRZWEJ3YVc1bmN5STZJanM3T3pzN096czdPenRCUVVGQk96dEJRVVZCT3pzN1NVRkhjVUpCTEVzN1FVRkRia0k3T3p0QlFVZEJMRzFDUVVGak8wRkJRVUU3TzBGQlExb3NVMEZCUzBNc1MwRkJUQ3hIUVVGaExGTkJRV0k3UVVGRFFTeFRRVUZMUXl4UFFVRk1MRWRCUVdVc1EwRkJReXhEUVVGb1FqdEJRVU5CTEZOQlFVdERMRXRCUVV3c1IwRkJZU3hKUVVGaU8wRkJRMEVzVTBGQlMwTXNaVUZCVEN4SFFVRjFRaXhKUVVGMlFqdEJRVU5CTEZOQlFVdERMRTlCUVV3c1IwRkJaU3hKUVVGbU8wRkJRMEVzVTBGQlMwTXNUMEZCVEN4SFFVRmxMRU5CUVVNc1EwRkJhRUk3UVVGRFFTeFRRVUZMUXl4VFFVRk1MRWRCUVdsQ0xFTkJRVU1zUTBGQmJFSTdRVUZEUVN4VFFVRkxReXhSUVVGTUxFZEJRV2RDTEVOQlFVTXNRMEZCYWtJN1FVRkRRU3hUUVVGTFF5eFhRVUZNTEVkQlFXMUNMRXRCUVc1Q08wRkJRMEVzVTBGQlMwTXNZMEZCVEN4SFFVRnpRaXhKUVVGMFFqczdRVUZGUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hUUVVGTFF5eFJRVUZNTEVkQlFXZENMRVZCUVdoQ08wRkJRMEVzVTBGQlMwTXNVMEZCVEN4SFFVRnBRaXhGUVVGcVFqdEJRVU5FT3p0QlFVVkVPenM3T3pzN096czBRa0ZKVVVNc1NTeEZRVUZOTzBGQlExb3NWMEZCUzFZc1MwRkJUQ3hIUVVGaFZTeEpRVUZpTzBGQlEwUTdPMEZCUlVRN096czdPenM3YzBOQlNXdENReXhGTEVWQlFVazdRVUZEY0VJc1YwRkJTMVlzWlVGQlRDeEhRVUYxUWxVc1JVRkJka0k3UVVGRFJEczdRVUZGUkRzN096czdPenM0UWtGSlZVTXNUU3hGUVVGUlF5eG5RaXhGUVVGclFqdEJRVU5zUXl4WFFVRkxXQ3hQUVVGTUxFZEJRV1ZWTEUxQlFXWTdPMEZCUlVFc1ZVRkJTVVVzVlVGQlZTeExRVUZMVGl4UlFVRnVRanRCUVVOQkxGVkJRVWxQTEZkQlFWY3NTMEZCUzA0c1UwRkJjRUk3TzBGQlJVRkxMR05CUVZGRkxFMUJRVklzUjBGQmFVSXNRMEZCYWtJN1FVRkRRVVFzWlVGQlUwTXNUVUZCVkN4SFFVRnJRaXhEUVVGc1FqczdRVUZGUVN4VlFVRkpTaXhOUVVGS0xFVkJRVms3UVVGRFZrVXNaMEpCUVZGSExFbEJRVklzUTBGQllVd3NUMEZCVDBvc1VVRkJjRUk3UVVGRFFVOHNhVUpCUVZORkxFbEJRVlFzUTBGQlkwd3NUMEZCVDAwc1YwRkJja0k3UVVGRFJEczdRVUZGUkN4VlFVRkpUQ3huUWtGQlNpeEZRVUZ6UWp0QlFVTndRa01zWjBKQlFWRkhMRWxCUVZJc1EwRkJZVW9zYVVKQlFXbENUQ3hSUVVFNVFqdEJRVU5CVHl4cFFrRkJVMFVzU1VGQlZDeERRVUZqU2l4cFFrRkJhVUpMTEZkQlFTOUNPMEZCUTBRN1FVRkRSanM3UVVGRlJEczdPenM3T3pzclFrRkpWME1zUnl4RlFVRkxPMEZCUTJRc1YwRkJTMlFzVVVGQlRDeEhRVUZuUW1Nc1IwRkJhRUk3UVVGRFJEczdRVUZGUkRzN096czdPenR2UTBGSlowSkRMRWNzUlVGQlN6dEJRVU51UWtFc1ZVRkJTVU1zUzBGQlNpeEhRVUZaTEVsQlFWbzdRVUZEUVVRc1ZVRkJTVllzU1VGQlNpeEhRVUZYTEV0QlFVdFdMRXRCUVdoQ08wRkJRMEZ2UWl4VlFVRkpWQ3hGUVVGS0xFZEJRVk1zUzBGQlMxWXNaVUZCWkR0QlFVTkJiVUlzVlVGQlNWSXNUVUZCU2l4SFFVRmhMRXRCUVV0V0xFOUJRV3hDTzBGQlEwRnJRaXhWUVVGSlRpeFBRVUZLTEVkQlFXTXNTMEZCUzA0c1VVRkJia0k3UVVGRFFWa3NWVUZCU1VVc1dVRkJTaXhIUVVGdFFpeExRVUZMUXl4aFFVRjRRanRCUVVOQlNDeFZRVUZKVEN4UlFVRktMRWRCUVdVc1MwRkJTMDRzVTBGQmNFSTdRVUZEUkRzN096czdPMnRDUVc1R2EwSmFMRXNpTENKbWFXeGxJam9pYlc5a1pXd3Vhbk1pTENKemIzVnlZMlZ6UTI5dWRHVnVkQ0k2V3lJdkx5QkRiM0I1Y21sbmFIUWdLR01wSURJd01UY3RNakF4T0NCWWFXRnRaVzRnV1dGcWFTQlRiMlowZDJGeVpTQkRieTRzSUV4MFpDNWNibHh1THlvcVhHNGdLaUJCSUhKbGNISmxjMlZ1ZEdGMGFXOXVJRzltSUdFZ2JXOWtaV3hjYmlBcUwxeHVaWGh3YjNKMElHUmxabUYxYkhRZ1kyeGhjM01nVFc5a1pXd2dlMXh1SUNBdktpcGNiaUFnSUNvZ1UyVjBkWEFnWVNCa1pXWmhkV3gwSUdWdGNIUjVJRzF2WkdWc1hHNGdJQ0FxTDF4dUlDQmpiMjV6ZEhKMVkzUnZjaWdwSUh0Y2JpQWdJQ0IwYUdsekxsOTBlWEJsSUQwZ0oyUmxabUYxYkhRbk8xeHVJQ0FnSUhSb2FYTXVYM0J2YjJ4SlJDQTlJQzB4TzF4dUlDQWdJSFJvYVhNdVgyNXZaR1VnUFNCdWRXeHNPMXh1SUNBZ0lIUm9hWE11WDJsdWNIVjBRWE56WlcxaWJHVnlJRDBnYm5Wc2JEdGNiaUFnSUNCMGFHbHpMbDlsWm1abFkzUWdQU0J1ZFd4c08xeHVJQ0FnSUhSb2FYTXVYM1pwWlhkSlJDQTlJQzB4TzF4dUlDQWdJSFJvYVhNdVgyTmhiV1Z5WVVsRUlEMGdMVEU3WEc0Z0lDQWdkR2hwY3k1ZmRYTmxja3RsZVNBOUlDMHhPMXh1SUNBZ0lIUm9hWE11WDJOaGMzUlRhR0ZrYjNjZ1BTQm1ZV3h6WlR0Y2JpQWdJQ0IwYUdsekxsOWliM1Z1WkdsdVoxTm9ZWEJsSUQwZ2JuVnNiRHRjYmx4dUlDQWdJQzh2SUU5eWFXZHBibUZzYkhrZ2JXOWtaV3dnWkc4Z1QySnFaV04wTG1OeVpXRjBaU2h1ZFd4c0tTQmhibVFnWEc0Z0lDQWdMeThnWTI5d2VTQjJZV3gxWlhNZ1puSnZiU0JsWm1abFkzUWdZVzVrSUdOMWMzUnZiVkJ5YjNCbGNuUnBaWE1nWlhabGNua2dkR2x0WlNCM2FHVnVJR05oYkd3Z2MyVjBSV1ptWldOMExGeHVJQ0FnSUM4dklIUm9hWE1nZDJsc2JDQmpZWFZ6WlNCbll5QndaWEptYjNKdFlXNWpaU3dnYzI4Z1kyaGhibWRsSUhSdklFRnljbUY1SUhSNWNHVWdkRzhnYzNSdmNtVWdkbUZzZFdWekxseHVJQ0FnSUhSb2FYTXVYMlJsWm1sdVpYTWdQU0JiWFR0Y2JpQWdJQ0IwYUdsekxsOTFibWxtYjNKdGN5QTlJRnRkTzF4dUlDQjlYRzVjYmlBZ0x5b3FYRzRnSUNBcUlGTmxkQ0IwYUdVZ2FHOXpkR2x1WnlCdWIyUmxJRzltSUhSb2FYTWdiVzlrWld4Y2JpQWdJQ29nUUhCaGNtRnRJSHRPYjJSbGZTQnViMlJsSUhSb1pTQm9iM04wYVc1bklHNXZaR1ZjYmlBZ0lDb3ZYRzRnSUhObGRFNXZaR1VvYm05a1pTa2dlMXh1SUNBZ0lIUm9hWE11WDI1dlpHVWdQU0J1YjJSbE8xeHVJQ0I5WEc1Y2JpQWdMeW9xWEc0Z0lDQXFJRk5sZENCMGFHVWdhVzV3ZFhRZ1lYTnpaVzFpYkdWeVhHNGdJQ0FxSUVCd1lYSmhiU0I3U1c1d2RYUkJjM05sYldKc1pYSjlJR2xoWEc0Z0lDQXFMMXh1SUNCelpYUkpibkIxZEVGemMyVnRZbXhsY2locFlTa2dlMXh1SUNBZ0lIUm9hWE11WDJsdWNIVjBRWE56WlcxaWJHVnlJRDBnYVdFN1hHNGdJSDFjYmx4dUlDQXZLaXBjYmlBZ0lDb2dVMlYwSUhSb1pTQnRiMlJsYkNCbFptWmxZM1JjYmlBZ0lDb2dRSEJoY21GdElIcy9SV1ptWldOMGZTQmxabVpsWTNRZ2RHaGxJR1ZtWm1WamRDQjBieUIxYzJWY2JpQWdJQ292WEc0Z0lITmxkRVZtWm1WamRDaGxabVpsWTNRc0lHTjFjM1J2YlZCeWIzQmxjblJwWlhNcElIdGNiaUFnSUNCMGFHbHpMbDlsWm1abFkzUWdQU0JsWm1abFkzUTdYRzVjYmlBZ0lDQnNaWFFnWkdWbWFXNWxjeUE5SUhSb2FYTXVYMlJsWm1sdVpYTTdYRzRnSUNBZ2JHVjBJSFZ1YVdadmNtMXpJRDBnZEdocGN5NWZkVzVwWm05eWJYTTdYRzRnSUNBZ1hHNGdJQ0FnWkdWbWFXNWxjeTVzWlc1bmRHZ2dQU0F3TzF4dUlDQWdJSFZ1YVdadmNtMXpMbXhsYm1kMGFDQTlJREE3WEc0Z0lDQWdYRzRnSUNBZ2FXWWdLR1ZtWm1WamRDa2dlMXh1SUNBZ0lDQWdaR1ZtYVc1bGN5NXdkWE5vS0dWbVptVmpkQzVmWkdWbWFXNWxjeWs3WEc0Z0lDQWdJQ0IxYm1sbWIzSnRjeTV3ZFhOb0tHVm1abVZqZEM1ZmNISnZjR1Z5ZEdsbGN5azdYRzRnSUNBZ2ZWeHVYRzRnSUNBZ2FXWWdLR04xYzNSdmJWQnliM0JsY25ScFpYTXBJSHRjYmlBZ0lDQWdJR1JsWm1sdVpYTXVjSFZ6YUNoamRYTjBiMjFRY205d1pYSjBhV1Z6TGw5a1pXWnBibVZ6S1R0Y2JpQWdJQ0FnSUhWdWFXWnZjbTF6TG5CMWMyZ29ZM1Z6ZEc5dFVISnZjR1Z5ZEdsbGN5NWZjSEp2Y0dWeWRHbGxjeWs3WEc0Z0lDQWdmVnh1SUNCOVhHNWNiaUFnTHlvcVhHNGdJQ0FxSUZObGRDQjBhR1VnZFhObGNpQnJaWGxjYmlBZ0lDb2dRSEJoY21GdElIdHVkVzFpWlhKOUlHdGxlVnh1SUNBZ0tpOWNiaUFnYzJWMFZYTmxja3RsZVNoclpYa3BJSHRjYmlBZ0lDQjBhR2x6TGw5MWMyVnlTMlY1SUQwZ2EyVjVPMXh1SUNCOVhHNWNiaUFnTHlvcVhHNGdJQ0FxSUVWNGRISmhZM1FnWVNCa2NtRjNhVzVuSUdsMFpXMWNiaUFnSUNvZ1FIQmhjbUZ0SUh0UFltcGxZM1I5SUc5MWRDQjBhR1VnY21WalpXbDJhVzVuSUdsMFpXMWNiaUFnSUNvdlhHNGdJR1Y0ZEhKaFkzUkVjbUYzU1hSbGJTaHZkWFFwSUh0Y2JpQWdJQ0J2ZFhRdWJXOWtaV3dnUFNCMGFHbHpPMXh1SUNBZ0lHOTFkQzV1YjJSbElEMGdkR2hwY3k1ZmJtOWtaVHRjYmlBZ0lDQnZkWFF1YVdFZ1BTQjBhR2x6TGw5cGJuQjFkRUZ6YzJWdFlteGxjanRjYmlBZ0lDQnZkWFF1WldabVpXTjBJRDBnZEdocGN5NWZaV1ptWldOME8xeHVJQ0FnSUc5MWRDNWtaV1pwYm1WeklEMGdkR2hwY3k1ZlpHVm1hVzVsY3p0Y2JpQWdJQ0J2ZFhRdVpHVndaVzVrWlc1amFXVnpJRDBnZEdocGN5NWZaR1Z3Wlc1a1pXNWphV1Z6TzF4dUlDQWdJRzkxZEM1MWJtbG1iM0p0Y3lBOUlIUm9hWE11WDNWdWFXWnZjbTF6TzF4dUlDQjlYRzU5WEc0aVhYMD0iXX0=