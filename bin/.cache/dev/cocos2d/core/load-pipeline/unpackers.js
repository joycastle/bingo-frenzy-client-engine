(function () {
    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
    var __module = nodeEnv ? module : { exports: {} };
    var __filename = 'engine-dev/cocos2d/core/load-pipeline/unpackers.js';
    var __require = nodeEnv ? function (request) {
        return require(request);
    } : function (request) {
        return __quick_compile__.require(request, __filename);
    };
    function __define(exports, require, module) {
        if (!nodeEnv) {
            __quick_compile__.registerModule(__filename, module);
        }
                'use strict';
        var Texture2D = require('../assets/CCTexture2D');
        var js = require('../platform/js');
        function JsonUnpacker() {
            this.jsons = {};
        }
        JsonUnpacker.prototype.load = function (indices, packedJson) {
            if (packedJson.length !== indices.length) {
                cc.errorID(4915);
            }
            for (var i = 0; i < indices.length; i++) {
                var key = indices[i];
                var json = packedJson[i];
                this.jsons[key] = json;
            }
        };
        JsonUnpacker.prototype.retrieve = function (key) {
            return this.jsons[key] || null;
        };
        function TextureUnpacker() {
            this.contents = {};
        }
        TextureUnpacker.ID = js._getClassId(Texture2D);
        TextureUnpacker.prototype.load = function (indices, packedJson) {
            var datas = packedJson.data.split('|');
            if (datas.length !== indices.length) {
                cc.errorID(4915);
            }
            for (var i = 0; i < indices.length; i++) {
                this.contents[indices[i]] = datas[i];
            }
        };
        TextureUnpacker.prototype.retrieve = function (key) {
            var content = this.contents[key];
            if (content) {
                return {
                    __type__: TextureUnpacker.ID,
                    content: content
                };
            } else {
                return null;
            }
        };
        if (CC_TEST) {
            cc._Test.JsonUnpacker = JsonUnpacker;
            cc._Test.TextureUnpacker = TextureUnpacker;
        }
        module.exports = {
            JsonUnpacker: JsonUnpacker,
            TextureUnpacker: TextureUnpacker
        };
    }
    if (nodeEnv) {
        __define(__module.exports, __require, __module);
    } else {
        __quick_compile__.registerModuleFunc(__filename, function () {
            __define(__module.exports, __require, __module);
        });
    }
}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVucGFja2Vycy5qcyIsIi9Vc2Vycy9TaGFyZWQvYmluZ29fZnJlbnp5L2VuZ2luZS9jb2NvczJkL2NvcmUvbG9hZC1waXBlbGluZS91bnBhY2tlcnMuanMiXSwibmFtZXMiOlsiVGV4dHVyZTJEIiwicmVxdWlyZSIsImpzIiwiSnNvblVucGFja2VyIiwianNvbnMiLCJwcm90b3R5cGUiLCJsb2FkIiwiaW5kaWNlcyIsInBhY2tlZEpzb24iLCJsZW5ndGgiLCJjYyIsImVycm9ySUQiLCJpIiwia2V5IiwianNvbiIsInJldHJpZXZlIiwiVGV4dHVyZVVucGFja2VyIiwiY29udGVudHMiLCJJRCIsIl9nZXRDbGFzc0lkIiwiZGF0YXMiLCJkYXRhIiwic3BsaXQiLCJjb250ZW50IiwiX190eXBlX18iLCJDQ19URVNUIiwiX1Rlc3QiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiO0lBQUEsSUFBQSxPQUFBLEdBQUEsT0FBQSxPQUFBLEtBQUEsV0FBQSxJQUFBLE9BQUEsT0FBQSxLQUFBLFdBQUE7Ozs7Ozs7Ozs7Ozs7UUEwQkEsSUFBSUEsU0FBQUEsR0FBWUMsT0FBQUEsQ0FBUSx1QkFBUkEsQ0FBaEI7UUFDQSxJQUFJQyxFQUFBQSxHQUFLRCxPQUFBQSxDQUFRLGdCQUFSQSxDQUFUO1FBRUEsU0FBU0UsWUFBVCxHQUF5QjtBQUFBLFlBQ3JCLEtBQUtDLEtBQUwsR0FBYSxFQUFiLENBRHFCO0FBQUE7UUFRekJELFlBQUFBLENBQWFFLFNBQWJGLENBQXVCRyxJQUF2QkgsR0FBOEIsVUFBVUksT0FBVixFQUFtQkMsVUFBbkIsRUFBK0I7QUFBQSxZQUN6RCxJQUFJQSxVQUFBQSxDQUFXQyxNQUFYRCxLQUFzQkQsT0FBQUEsQ0FBUUUsTUFBbEMsRUFBMEM7QUFBQSxnQkFDdENDLEVBQUFBLENBQUdDLE9BQUhELENBQVcsSUFBWEEsRUFEc0M7QUFBQSxhQURlO0FBQUEsWUFJekQsS0FBSyxJQUFJRSxDQUFBQSxHQUFJLENBQVIsQ0FBTCxDQUFnQkEsQ0FBQUEsR0FBSUwsT0FBQUEsQ0FBUUUsTUFBNUIsRUFBb0NHLENBQUFBLEVBQXBDLEVBQXlDO0FBQUEsZ0JBQ3JDLElBQUlDLEdBQUFBLEdBQU1OLE9BQUFBLENBQVFLLENBQVJMLENBQVYsQ0FEcUM7QUFBQSxnQkFFckMsSUFBSU8sSUFBQUEsR0FBT04sVUFBQUEsQ0FBV0ksQ0FBWEosQ0FBWCxDQUZxQztBQUFBLGdCQUdyQyxLQUFLSixLQUFMLENBQVdTLEdBQVgsSUFBa0JDLElBQWxCLENBSHFDO0FBQUEsYUFKZ0I7QUFBQSxTQUE3RFg7UUFXQUEsWUFBQUEsQ0FBYUUsU0FBYkYsQ0FBdUJZLFFBQXZCWixHQUFrQyxVQUFVVSxHQUFWLEVBQWU7QUFBQSxZQUM3QyxPQUFPLEtBQUtULEtBQUwsQ0FBV1MsR0FBWCxLQUFtQixJQUExQixDQUQ2QztBQUFBLFNBQWpEVjtRQUtBLFNBQVNhLGVBQVQsR0FBNEI7QUFBQSxZQUN4QixLQUFLQyxRQUFMLEdBQWdCLEVBQWhCLENBRHdCO0FBQUE7UUFHNUJELGVBQUFBLENBQWdCRSxFQUFoQkYsR0FBcUJkLEVBQUFBLENBQUdpQixXQUFIakIsQ0FBZUYsU0FBZkUsQ0FBckJjO1FBTUFBLGVBQUFBLENBQWdCWCxTQUFoQlcsQ0FBMEJWLElBQTFCVSxHQUFpQyxVQUFVVCxPQUFWLEVBQW1CQyxVQUFuQixFQUErQjtBQUFBLFlBQzVELElBQUlZLEtBQUFBLEdBQVFaLFVBQUFBLENBQVdhLElBQVhiLENBQWdCYyxLQUFoQmQsQ0FBc0IsR0FBdEJBLENBQVosQ0FENEQ7QUFBQSxZQUU1RCxJQUFJWSxLQUFBQSxDQUFNWCxNQUFOVyxLQUFpQmIsT0FBQUEsQ0FBUUUsTUFBN0IsRUFBcUM7QUFBQSxnQkFDakNDLEVBQUFBLENBQUdDLE9BQUhELENBQVcsSUFBWEEsRUFEaUM7QUFBQSxhQUZ1QjtBQUFBLFlBSzVELEtBQUssSUFBSUUsQ0FBQUEsR0FBSSxDQUFSLENBQUwsQ0FBZ0JBLENBQUFBLEdBQUlMLE9BQUFBLENBQVFFLE1BQTVCLEVBQW9DRyxDQUFBQSxFQUFwQyxFQUF5QztBQUFBLGdCQUNyQyxLQUFLSyxRQUFMLENBQWNWLE9BQUFBLENBQVFLLENBQVJMLENBQWQsSUFBNEJhLEtBQUFBLENBQU1SLENBQU5RLENBQTVCLENBRHFDO0FBQUEsYUFMbUI7QUFBQSxTQUFoRUo7UUFVQUEsZUFBQUEsQ0FBZ0JYLFNBQWhCVyxDQUEwQkQsUUFBMUJDLEdBQXFDLFVBQVVILEdBQVYsRUFBZTtBQUFBLFlBQ2hELElBQUlVLE9BQUFBLEdBQVUsS0FBS04sUUFBTCxDQUFjSixHQUFkLENBQWQsQ0FEZ0Q7QUFBQSxZQUVoRCxJQUFJVSxPQUFKLEVBQWE7QUFBQSxnQkFDVCxPQUFPO0FBQUEsb0JBQ0hDLFFBQUFBLEVBQVVSLGVBQUFBLENBQWdCRSxFQUR2QjtBQUFBLG9CQUVISyxPQUFBQSxFQUFTQSxPQUZOO0FBQUEsaUJBQVAsQ0FEUztBQUFBLGFBQWIsTUFNSztBQUFBLGdCQUNELE9BQU8sSUFBUCxDQURDO0FBQUEsYUFSMkM7QUFBQSxTQUFwRFA7UUFhQSxJQUFJUyxPQUFKLEVBQWE7QUFBQSxZQUNUZixFQUFBQSxDQUFHZ0IsS0FBSGhCLENBQVNQLFlBQVRPLEdBQXdCUCxZQUF4Qk8sQ0FEUztBQUFBLFlBRVRBLEVBQUFBLENBQUdnQixLQUFIaEIsQ0FBU00sZUFBVE4sR0FBMkJNLGVBQTNCTixDQUZTO0FBQUE7UUFLYmlCLE1BQUFBLENBQU9DLE9BQVBELEdBQWlCO0FBQUEsWUFDYnhCLFlBQUFBLEVBQUFBLFlBRGE7QUFBQSxZQUViYSxlQUFBQSxFQUFBQSxlQUZhO0FBQUEsU0FBakJXIiwiZmlsZSI6InVucGFja2Vycy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gQ29weXJpZ2h0IChjKSAyMDEzLTIwMTYgQ2h1a29uZyBUZWNobm9sb2dpZXMgSW5jLlxuIENvcHlyaWdodCAoYykgMjAxNy0yMDE4IFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLlxuXG4gaHR0cHM6Ly93d3cuY29jb3MuY29tL1xuXG4gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZW5naW5lIHNvdXJjZSBjb2RlICh0aGUgXCJTb2Z0d2FyZVwiKSwgYSBsaW1pdGVkLFxuIHdvcmxkd2lkZSwgcm95YWx0eS1mcmVlLCBub24tYXNzaWduYWJsZSwgcmV2b2NhYmxlIGFuZCBub24tZXhjbHVzaXZlIGxpY2Vuc2VcbiB0byB1c2UgQ29jb3MgQ3JlYXRvciBzb2xlbHkgdG8gZGV2ZWxvcCBnYW1lcyBvbiB5b3VyIHRhcmdldCBwbGF0Zm9ybXMuIFlvdSBzaGFsbFxuIG5vdCB1c2UgQ29jb3MgQ3JlYXRvciBzb2Z0d2FyZSBmb3IgZGV2ZWxvcGluZyBvdGhlciBzb2Z0d2FyZSBvciB0b29scyB0aGF0J3NcbiB1c2VkIGZvciBkZXZlbG9waW5nIGdhbWVzLiBZb3UgYXJlIG5vdCBncmFudGVkIHRvIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsXG4gc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIENvY29zIENyZWF0b3IuXG5cbiBUaGUgc29mdHdhcmUgb3IgdG9vbHMgaW4gdGhpcyBMaWNlbnNlIEFncmVlbWVudCBhcmUgbGljZW5zZWQsIG5vdCBzb2xkLlxuIFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLiByZXNlcnZlcyBhbGwgcmlnaHRzIG5vdCBleHByZXNzbHkgZ3JhbnRlZCB0byB5b3UuXG5cbiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuIFRIRSBTT0ZUV0FSRS5cbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG52YXIgVGV4dHVyZTJEID0gcmVxdWlyZSgnLi4vYXNzZXRzL0NDVGV4dHVyZTJEJyk7XG52YXIganMgPSByZXF1aXJlKCcuLi9wbGF0Zm9ybS9qcycpO1xuXG5mdW5jdGlvbiBKc29uVW5wYWNrZXIgKCkge1xuICAgIHRoaXMuanNvbnMgPSB7fTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1N0cmluZ1tdfSBpbmRpY2VzXG4gKiBAcGFyYW0ge09iamVjdFtdfSBwYWNrZWRKc29uXG4gKi9cbkpzb25VbnBhY2tlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uIChpbmRpY2VzLCBwYWNrZWRKc29uKSB7XG4gICAgaWYgKHBhY2tlZEpzb24ubGVuZ3RoICE9PSBpbmRpY2VzLmxlbmd0aCkge1xuICAgICAgICBjYy5lcnJvcklEKDQ5MTUpO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluZGljZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGtleSA9IGluZGljZXNbaV07XG4gICAgICAgIHZhciBqc29uID0gcGFja2VkSnNvbltpXTtcbiAgICAgICAgdGhpcy5qc29uc1trZXldID0ganNvbjtcbiAgICB9XG59O1xuXG5Kc29uVW5wYWNrZXIucHJvdG90eXBlLnJldHJpZXZlID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiB0aGlzLmpzb25zW2tleV0gfHwgbnVsbDtcbn07XG5cblxuZnVuY3Rpb24gVGV4dHVyZVVucGFja2VyICgpIHtcbiAgICB0aGlzLmNvbnRlbnRzID0ge307XG59XG5UZXh0dXJlVW5wYWNrZXIuSUQgPSBqcy5fZ2V0Q2xhc3NJZChUZXh0dXJlMkQpO1xuXG4vKipcbiAqIEBwYXJhbSB7U3RyaW5nW119IGluZGljZXNcbiAqIEBwYXJhbSB7T2JqZWN0W119IHBhY2tlZEpzb25cbiAqL1xuVGV4dHVyZVVucGFja2VyLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKGluZGljZXMsIHBhY2tlZEpzb24pIHtcbiAgICB2YXIgZGF0YXMgPSBwYWNrZWRKc29uLmRhdGEuc3BsaXQoJ3wnKTtcbiAgICBpZiAoZGF0YXMubGVuZ3RoICE9PSBpbmRpY2VzLmxlbmd0aCkge1xuICAgICAgICBjYy5lcnJvcklEKDQ5MTUpO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluZGljZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5jb250ZW50c1tpbmRpY2VzW2ldXSA9IGRhdGFzW2ldO1xuICAgIH1cbn07XG5cblRleHR1cmVVbnBhY2tlci5wcm90b3R5cGUucmV0cmlldmUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIGNvbnRlbnQgPSB0aGlzLmNvbnRlbnRzW2tleV07XG4gICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9fdHlwZV9fOiBUZXh0dXJlVW5wYWNrZXIuSUQsXG4gICAgICAgICAgICBjb250ZW50OiBjb250ZW50XG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59O1xuXG5pZiAoQ0NfVEVTVCkge1xuICAgIGNjLl9UZXN0Lkpzb25VbnBhY2tlciA9IEpzb25VbnBhY2tlcjtcbiAgICBjYy5fVGVzdC5UZXh0dXJlVW5wYWNrZXIgPSBUZXh0dXJlVW5wYWNrZXI7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIEpzb25VbnBhY2tlcixcbiAgICBUZXh0dXJlVW5wYWNrZXIsXG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuIENvcHlyaWdodCAoYykgMjAxMy0yMDE2IENodWtvbmcgVGVjaG5vbG9naWVzIEluYy5cbiBDb3B5cmlnaHQgKGMpIDIwMTctMjAxOCBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC5cblxuIGh0dHBzOi8vd3d3LmNvY29zLmNvbS9cblxuIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGVuZ2luZSBzb3VyY2UgY29kZSAodGhlIFwiU29mdHdhcmVcIiksIGEgbGltaXRlZCxcbiB3b3JsZHdpZGUsIHJveWFsdHktZnJlZSwgbm9uLWFzc2lnbmFibGUsIHJldm9jYWJsZSBhbmQgbm9uLWV4Y2x1c2l2ZSBsaWNlbnNlXG4gdG8gdXNlIENvY29zIENyZWF0b3Igc29sZWx5IHRvIGRldmVsb3AgZ2FtZXMgb24geW91ciB0YXJnZXQgcGxhdGZvcm1zLiBZb3Ugc2hhbGxcbiBub3QgdXNlIENvY29zIENyZWF0b3Igc29mdHdhcmUgZm9yIGRldmVsb3Bpbmcgb3RoZXIgc29mdHdhcmUgb3IgdG9vbHMgdGhhdCdzXG4gdXNlZCBmb3IgZGV2ZWxvcGluZyBnYW1lcy4gWW91IGFyZSBub3QgZ3JhbnRlZCB0byBwdWJsaXNoLCBkaXN0cmlidXRlLFxuIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiBDb2NvcyBDcmVhdG9yLlxuXG4gVGhlIHNvZnR3YXJlIG9yIHRvb2xzIGluIHRoaXMgTGljZW5zZSBBZ3JlZW1lbnQgYXJlIGxpY2Vuc2VkLCBub3Qgc29sZC5cbiBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC4gcmVzZXJ2ZXMgYWxsIHJpZ2h0cyBub3QgZXhwcmVzc2x5IGdyYW50ZWQgdG8geW91LlxuXG4gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbiBUSEUgU09GVFdBUkUuXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxudmFyIFRleHR1cmUyRCA9IHJlcXVpcmUoJy4uL2Fzc2V0cy9DQ1RleHR1cmUyRCcpO1xudmFyIGpzID0gcmVxdWlyZSgnLi4vcGxhdGZvcm0vanMnKTtcblxuZnVuY3Rpb24gSnNvblVucGFja2VyKCkge1xuICAgIHRoaXMuanNvbnMgPSB7fTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1N0cmluZ1tdfSBpbmRpY2VzXG4gKiBAcGFyYW0ge09iamVjdFtdfSBwYWNrZWRKc29uXG4gKi9cbkpzb25VbnBhY2tlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uIChpbmRpY2VzLCBwYWNrZWRKc29uKSB7XG4gICAgaWYgKHBhY2tlZEpzb24ubGVuZ3RoICE9PSBpbmRpY2VzLmxlbmd0aCkge1xuICAgICAgICBjYy5lcnJvcklEKDQ5MTUpO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluZGljZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGtleSA9IGluZGljZXNbaV07XG4gICAgICAgIHZhciBqc29uID0gcGFja2VkSnNvbltpXTtcbiAgICAgICAgdGhpcy5qc29uc1trZXldID0ganNvbjtcbiAgICB9XG59O1xuXG5Kc29uVW5wYWNrZXIucHJvdG90eXBlLnJldHJpZXZlID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiB0aGlzLmpzb25zW2tleV0gfHwgbnVsbDtcbn07XG5cbmZ1bmN0aW9uIFRleHR1cmVVbnBhY2tlcigpIHtcbiAgICB0aGlzLmNvbnRlbnRzID0ge307XG59XG5UZXh0dXJlVW5wYWNrZXIuSUQgPSBqcy5fZ2V0Q2xhc3NJZChUZXh0dXJlMkQpO1xuXG4vKipcbiAqIEBwYXJhbSB7U3RyaW5nW119IGluZGljZXNcbiAqIEBwYXJhbSB7T2JqZWN0W119IHBhY2tlZEpzb25cbiAqL1xuVGV4dHVyZVVucGFja2VyLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKGluZGljZXMsIHBhY2tlZEpzb24pIHtcbiAgICB2YXIgZGF0YXMgPSBwYWNrZWRKc29uLmRhdGEuc3BsaXQoJ3wnKTtcbiAgICBpZiAoZGF0YXMubGVuZ3RoICE9PSBpbmRpY2VzLmxlbmd0aCkge1xuICAgICAgICBjYy5lcnJvcklEKDQ5MTUpO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluZGljZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5jb250ZW50c1tpbmRpY2VzW2ldXSA9IGRhdGFzW2ldO1xuICAgIH1cbn07XG5cblRleHR1cmVVbnBhY2tlci5wcm90b3R5cGUucmV0cmlldmUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIGNvbnRlbnQgPSB0aGlzLmNvbnRlbnRzW2tleV07XG4gICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9fdHlwZV9fOiBUZXh0dXJlVW5wYWNrZXIuSUQsXG4gICAgICAgICAgICBjb250ZW50OiBjb250ZW50XG4gICAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufTtcblxuaWYgKENDX1RFU1QpIHtcbiAgICBjYy5fVGVzdC5Kc29uVW5wYWNrZXIgPSBKc29uVW5wYWNrZXI7XG4gICAgY2MuX1Rlc3QuVGV4dHVyZVVucGFja2VyID0gVGV4dHVyZVVucGFja2VyO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBKc29uVW5wYWNrZXI6IEpzb25VbnBhY2tlcixcbiAgICBUZXh0dXJlVW5wYWNrZXI6IFRleHR1cmVVbnBhY2tlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYkluVnVjR0ZqYTJWeWN5NXFjeUpkTENKdVlXMWxjeUk2V3lKVVpYaDBkWEpsTWtRaUxDSnlaWEYxYVhKbElpd2lhbk1pTENKS2MyOXVWVzV3WVdOclpYSWlMQ0pxYzI5dWN5SXNJbkJ5YjNSdmRIbHdaU0lzSW14dllXUWlMQ0pwYm1ScFkyVnpJaXdpY0dGamEyVmtTbk52YmlJc0lteGxibWQwYUNJc0ltTmpJaXdpWlhKeWIzSkpSQ0lzSW1raUxDSnJaWGtpTENKcWMyOXVJaXdpY21WMGNtbGxkbVVpTENKVVpYaDBkWEpsVlc1d1lXTnJaWElpTENKamIyNTBaVzUwY3lJc0lrbEVJaXdpWDJkbGRFTnNZWE56U1dRaUxDSmtZWFJoY3lJc0ltUmhkR0VpTENKemNHeHBkQ0lzSW1OdmJuUmxiblFpTENKZlgzUjVjR1ZmWHlJc0lrTkRYMVJGVTFRaUxDSmZWR1Z6ZENJc0ltMXZaSFZzWlNJc0ltVjRjRzl5ZEhNaVhTd2liV0Z3Y0dsdVozTWlPaUk3TzBGQlFVRTdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN08wRkJNRUpCTEVsQlFVbEJMRmxCUVZsRExGRkJRVkVzZFVKQlFWSXNRMEZCYUVJN1FVRkRRU3hKUVVGSlF5eExRVUZMUkN4UlFVRlJMR2RDUVVGU0xFTkJRVlE3TzBGQlJVRXNVMEZCVTBVc1dVRkJWQ3hIUVVGNVFqdEJRVU55UWl4VFFVRkxReXhMUVVGTUxFZEJRV0VzUlVGQllqdEJRVU5JT3p0QlFVVkVPenM3TzBGQlNVRkVMR0ZCUVdGRkxGTkJRV0lzUTBGQmRVSkRMRWxCUVhaQ0xFZEJRVGhDTEZWQlFWVkRMRTlCUVZZc1JVRkJiVUpETEZWQlFXNUNMRVZCUVN0Q08wRkJRM3BFTEZGQlFVbEJMRmRCUVZkRExFMUJRVmdzUzBGQmMwSkdMRkZCUVZGRkxFMUJRV3hETEVWQlFUQkRPMEZCUTNSRFF5eFhRVUZIUXl4UFFVRklMRU5CUVZjc1NVRkJXRHRCUVVOSU8wRkJRMFFzVTBGQlN5eEpRVUZKUXl4SlFVRkpMRU5CUVdJc1JVRkJaMEpCTEVsQlFVbE1MRkZCUVZGRkxFMUJRVFZDTEVWQlFXOURSeXhIUVVGd1F5eEZRVUY1UXp0QlFVTnlReXhaUVVGSlF5eE5RVUZOVGl4UlFVRlJTeXhEUVVGU0xFTkJRVlk3UVVGRFFTeFpRVUZKUlN4UFFVRlBUaXhYUVVGWFNTeERRVUZZTEVOQlFWZzdRVUZEUVN4aFFVRkxVaXhMUVVGTUxFTkJRVmRUTEVkQlFWZ3NTVUZCYTBKRExFbEJRV3hDTzBGQlEwZzdRVUZEU2l4RFFWUkVPenRCUVZkQldDeGhRVUZoUlN4VFFVRmlMRU5CUVhWQ1ZTeFJRVUYyUWl4SFFVRnJReXhWUVVGVlJpeEhRVUZXTEVWQlFXVTdRVUZETjBNc1YwRkJUeXhMUVVGTFZDeExRVUZNTEVOQlFWZFRMRWRCUVZnc1MwRkJiVUlzU1VGQk1VSTdRVUZEU0N4RFFVWkVPenRCUVV0QkxGTkJRVk5ITEdWQlFWUXNSMEZCTkVJN1FVRkRlRUlzVTBGQlMwTXNVVUZCVEN4SFFVRm5RaXhGUVVGb1FqdEJRVU5JTzBGQlEwUkVMR2RDUVVGblFrVXNSVUZCYUVJc1IwRkJjVUpvUWl4SFFVRkhhVUlzVjBGQlNDeERRVUZsYmtJc1UwRkJaaXhEUVVGeVFqczdRVUZGUVRzN096dEJRVWxCWjBJc1owSkJRV2RDV0N4VFFVRm9RaXhEUVVFd1FrTXNTVUZCTVVJc1IwRkJhVU1zVlVGQlZVTXNUMEZCVml4RlFVRnRRa01zVlVGQmJrSXNSVUZCSzBJN1FVRkROVVFzVVVGQlNWa3NVVUZCVVZvc1YwRkJWMkVzU1VGQldDeERRVUZuUWtNc1MwRkJhRUlzUTBGQmMwSXNSMEZCZEVJc1EwRkJXanRCUVVOQkxGRkJRVWxHTEUxQlFVMVlMRTFCUVU0c1MwRkJhVUpHTEZGQlFWRkZMRTFCUVRkQ0xFVkJRWEZETzBGQlEycERReXhYUVVGSFF5eFBRVUZJTEVOQlFWY3NTVUZCV0R0QlFVTklPMEZCUTBRc1UwRkJTeXhKUVVGSlF5eEpRVUZKTEVOQlFXSXNSVUZCWjBKQkxFbEJRVWxNTEZGQlFWRkZMRTFCUVRWQ0xFVkJRVzlEUnl4SFFVRndReXhGUVVGNVF6dEJRVU55UXl4aFFVRkxTeXhSUVVGTUxFTkJRV05XTEZGQlFWRkxMRU5CUVZJc1EwRkJaQ3hKUVVFMFFsRXNUVUZCVFZJc1EwRkJUaXhEUVVFMVFqdEJRVU5JTzBGQlEwb3NRMEZTUkRzN1FVRlZRVWtzWjBKQlFXZENXQ3hUUVVGb1FpeERRVUV3UWxVc1VVRkJNVUlzUjBGQmNVTXNWVUZCVlVZc1IwRkJWaXhGUVVGbE8wRkJRMmhFTEZGQlFVbFZMRlZCUVZVc1MwRkJTMDRzVVVGQlRDeERRVUZqU2l4SFFVRmtMRU5CUVdRN1FVRkRRU3hSUVVGSlZTeFBRVUZLTEVWQlFXRTdRVUZEVkN4bFFVRlBPMEZCUTBoRExITkNRVUZWVWl4blFrRkJaMEpGTEVWQlJIWkNPMEZCUlVoTExIRkNRVUZUUVR0QlFVWk9MRk5CUVZBN1FVRkpTQ3hMUVV4RUxFMUJUVXM3UVVGRFJDeGxRVUZQTEVsQlFWQTdRVUZEU0R0QlFVTktMRU5CV0VRN08wRkJZVUVzU1VGQlNVVXNUMEZCU2l4RlFVRmhPMEZCUTFSbUxFOUJRVWRuUWl4TFFVRklMRU5CUVZOMlFpeFpRVUZVTEVkQlFYZENRU3haUVVGNFFqdEJRVU5CVHl4UFFVRkhaMElzUzBGQlNDeERRVUZUVml4bFFVRlVMRWRCUVRKQ1FTeGxRVUV6UWp0QlFVTklPenRCUVVWRVZ5eFBRVUZQUXl4UFFVRlFMRWRCUVdsQ08wRkJRMko2UWl3NFFrRkVZVHRCUVVWaVlUdEJRVVpoTEVOQlFXcENJaXdpWm1sc1pTSTZJblZ1Y0dGamEyVnljeTVxY3lJc0luTnZkWEpqWlhORGIyNTBaVzUwSWpwYklpOHFLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xWEc0Z1EyOXdlWEpwWjJoMElDaGpLU0F5TURFekxUSXdNVFlnUTJoMWEyOXVaeUJVWldOb2JtOXNiMmRwWlhNZ1NXNWpMbHh1SUVOdmNIbHlhV2RvZENBb1l5a2dNakF4TnkweU1ERTRJRmhwWVcxbGJpQlpZV3BwSUZOdlpuUjNZWEpsSUVOdkxpd2dUSFJrTGx4dVhHNGdhSFIwY0hNNkx5OTNkM2N1WTI5amIzTXVZMjl0TDF4dVhHNGdVR1Z5YldsemMybHZiaUJwY3lCb1pYSmxZbmtnWjNKaGJuUmxaQ3dnWm5KbFpTQnZaaUJqYUdGeVoyVXNJSFJ2SUdGdWVTQndaWEp6YjI0Z2IySjBZV2x1YVc1bklHRWdZMjl3ZVZ4dUlHOW1JSFJvYVhNZ2MyOW1kSGRoY21VZ1lXNWtJR0Z6YzI5amFXRjBaV1FnWlc1bmFXNWxJSE52ZFhKalpTQmpiMlJsSUNoMGFHVWdYQ0pUYjJaMGQyRnlaVndpS1N3Z1lTQnNhVzFwZEdWa0xGeHVJSGR2Y214a2QybGtaU3dnY205NVlXeDBlUzFtY21WbExDQnViMjR0WVhOemFXZHVZV0pzWlN3Z2NtVjJiMk5oWW14bElHRnVaQ0J1YjI0dFpYaGpiSFZ6YVhabElHeHBZMlZ1YzJWY2JpQjBieUIxYzJVZ1EyOWpiM01nUTNKbFlYUnZjaUJ6YjJ4bGJIa2dkRzhnWkdWMlpXeHZjQ0JuWVcxbGN5QnZiaUI1YjNWeUlIUmhjbWRsZENCd2JHRjBabTl5YlhNdUlGbHZkU0J6YUdGc2JGeHVJRzV2ZENCMWMyVWdRMjlqYjNNZ1EzSmxZWFJ2Y2lCemIyWjBkMkZ5WlNCbWIzSWdaR1YyWld4dmNHbHVaeUJ2ZEdobGNpQnpiMlowZDJGeVpTQnZjaUIwYjI5c2N5QjBhR0YwSjNOY2JpQjFjMlZrSUdadmNpQmtaWFpsYkc5d2FXNW5JR2RoYldWekxpQlpiM1VnWVhKbElHNXZkQ0JuY21GdWRHVmtJSFJ2SUhCMVlteHBjMmdzSUdScGMzUnlhV0oxZEdVc1hHNGdjM1ZpYkdsalpXNXpaU3dnWVc1a0wyOXlJSE5sYkd3Z1kyOXdhV1Z6SUc5bUlFTnZZMjl6SUVOeVpXRjBiM0l1WEc1Y2JpQlVhR1VnYzI5bWRIZGhjbVVnYjNJZ2RHOXZiSE1nYVc0Z2RHaHBjeUJNYVdObGJuTmxJRUZuY21WbGJXVnVkQ0JoY21VZ2JHbGpaVzV6WldRc0lHNXZkQ0J6YjJ4a0xseHVJRmhwWVcxbGJpQlpZV3BwSUZOdlpuUjNZWEpsSUVOdkxpd2dUSFJrTGlCeVpYTmxjblpsY3lCaGJHd2djbWxuYUhSeklHNXZkQ0JsZUhCeVpYTnpiSGtnWjNKaGJuUmxaQ0IwYnlCNWIzVXVYRzVjYmlCVVNFVWdVMDlHVkZkQlVrVWdTVk1nVUZKUFZrbEVSVVFnWENKQlV5QkpVMXdpTENCWFNWUklUMVZVSUZkQlVsSkJUbFJaSUU5R0lFRk9XU0JMU1U1RUxDQkZXRkJTUlZOVElFOVNYRzRnU1UxUVRFbEZSQ3dnU1U1RFRGVkVTVTVISUVKVlZDQk9UMVFnVEVsTlNWUkZSQ0JVVHlCVVNFVWdWMEZTVWtGT1ZFbEZVeUJQUmlCTlJWSkRTRUZPVkVGQ1NVeEpWRmtzWEc0Z1JrbFVUa1ZUVXlCR1QxSWdRU0JRUVZKVVNVTlZURUZTSUZCVlVsQlBVMFVnUVU1RUlFNVBUa2xPUmxKSlRrZEZUVVZPVkM0Z1NVNGdUazhnUlZaRlRsUWdVMGhCVEV3Z1ZFaEZYRzRnUVZWVVNFOVNVeUJQVWlCRFQxQlpVa2xIU0ZRZ1NFOU1SRVZTVXlCQ1JTQk1TVUZDVEVVZ1JrOVNJRUZPV1NCRFRFRkpUU3dnUkVGTlFVZEZVeUJQVWlCUFZFaEZVbHh1SUV4SlFVSkpURWxVV1N3Z1YwaEZWRWhGVWlCSlRpQkJUaUJCUTFSSlQwNGdUMFlnUTA5T1ZGSkJRMVFzSUZSUFVsUWdUMUlnVDFSSVJWSlhTVk5GTENCQlVrbFRTVTVISUVaU1QwMHNYRzRnVDFWVUlFOUdJRTlTSUVsT0lFTlBUazVGUTFSSlQwNGdWMGxVU0NCVVNFVWdVMDlHVkZkQlVrVWdUMUlnVkVoRklGVlRSU0JQVWlCUFZFaEZVaUJFUlVGTVNVNUhVeUJKVGx4dUlGUklSU0JUVDBaVVYwRlNSUzVjYmlBcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FMMXh1WEc1MllYSWdWR1Y0ZEhWeVpUSkVJRDBnY21WeGRXbHlaU2duTGk0dllYTnpaWFJ6TDBORFZHVjRkSFZ5WlRKRUp5azdYRzUyWVhJZ2FuTWdQU0J5WlhGMWFYSmxLQ2N1TGk5d2JHRjBabTl5YlM5cWN5Y3BPMXh1WEc1bWRXNWpkR2x2YmlCS2MyOXVWVzV3WVdOclpYSWdLQ2tnZTF4dUlDQWdJSFJvYVhNdWFuTnZibk1nUFNCN2ZUdGNibjFjYmx4dUx5b3FYRzRnS2lCQWNHRnlZVzBnZTFOMGNtbHVaMXRkZlNCcGJtUnBZMlZ6WEc0Z0tpQkFjR0Z5WVcwZ2UwOWlhbVZqZEZ0ZGZTQndZV05yWldSS2MyOXVYRzRnS2k5Y2JrcHpiMjVWYm5CaFkydGxjaTV3Y205MGIzUjVjR1V1Ykc5aFpDQTlJR1oxYm1OMGFXOXVJQ2hwYm1ScFkyVnpMQ0J3WVdOclpXUktjMjl1S1NCN1hHNGdJQ0FnYVdZZ0tIQmhZMnRsWkVwemIyNHViR1Z1WjNSb0lDRTlQU0JwYm1ScFkyVnpMbXhsYm1kMGFDa2dlMXh1SUNBZ0lDQWdJQ0JqWXk1bGNuSnZja2xFS0RRNU1UVXBPMXh1SUNBZ0lIMWNiaUFnSUNCbWIzSWdLSFpoY2lCcElEMGdNRHNnYVNBOElHbHVaR2xqWlhNdWJHVnVaM1JvT3lCcEt5c3BJSHRjYmlBZ0lDQWdJQ0FnZG1GeUlHdGxlU0E5SUdsdVpHbGpaWE5iYVYwN1hHNGdJQ0FnSUNBZ0lIWmhjaUJxYzI5dUlEMGdjR0ZqYTJWa1NuTnZibHRwWFR0Y2JpQWdJQ0FnSUNBZ2RHaHBjeTVxYzI5dWMxdHJaWGxkSUQwZ2FuTnZianRjYmlBZ0lDQjlYRzU5TzF4dVhHNUtjMjl1Vlc1d1lXTnJaWEl1Y0hKdmRHOTBlWEJsTG5KbGRISnBaWFpsSUQwZ1puVnVZM1JwYjI0Z0tHdGxlU2tnZTF4dUlDQWdJSEpsZEhWeWJpQjBhR2x6TG1wemIyNXpXMnRsZVYwZ2ZId2diblZzYkR0Y2JuMDdYRzVjYmx4dVpuVnVZM1JwYjI0Z1ZHVjRkSFZ5WlZWdWNHRmphMlZ5SUNncElIdGNiaUFnSUNCMGFHbHpMbU52Ym5SbGJuUnpJRDBnZTMwN1hHNTlYRzVVWlhoMGRYSmxWVzV3WVdOclpYSXVTVVFnUFNCcWN5NWZaMlYwUTJ4aGMzTkpaQ2hVWlhoMGRYSmxNa1FwTzF4dVhHNHZLaXBjYmlBcUlFQndZWEpoYlNCN1UzUnlhVzVuVzExOUlHbHVaR2xqWlhOY2JpQXFJRUJ3WVhKaGJTQjdUMkpxWldOMFcxMTlJSEJoWTJ0bFpFcHpiMjVjYmlBcUwxeHVWR1Y0ZEhWeVpWVnVjR0ZqYTJWeUxuQnliM1J2ZEhsd1pTNXNiMkZrSUQwZ1puVnVZM1JwYjI0Z0tHbHVaR2xqWlhNc0lIQmhZMnRsWkVwemIyNHBJSHRjYmlBZ0lDQjJZWElnWkdGMFlYTWdQU0J3WVdOclpXUktjMjl1TG1SaGRHRXVjM0JzYVhRb0ozd25LVHRjYmlBZ0lDQnBaaUFvWkdGMFlYTXViR1Z1WjNSb0lDRTlQU0JwYm1ScFkyVnpMbXhsYm1kMGFDa2dlMXh1SUNBZ0lDQWdJQ0JqWXk1bGNuSnZja2xFS0RRNU1UVXBPMXh1SUNBZ0lIMWNiaUFnSUNCbWIzSWdLSFpoY2lCcElEMGdNRHNnYVNBOElHbHVaR2xqWlhNdWJHVnVaM1JvT3lCcEt5c3BJSHRjYmlBZ0lDQWdJQ0FnZEdocGN5NWpiMjUwWlc1MGMxdHBibVJwWTJWelcybGRYU0E5SUdSaGRHRnpXMmxkTzF4dUlDQWdJSDFjYm4wN1hHNWNibFJsZUhSMWNtVlZibkJoWTJ0bGNpNXdjbTkwYjNSNWNHVXVjbVYwY21sbGRtVWdQU0JtZFc1amRHbHZiaUFvYTJWNUtTQjdYRzRnSUNBZ2RtRnlJR052Ym5SbGJuUWdQU0IwYUdsekxtTnZiblJsYm5SelcydGxlVjA3WEc0Z0lDQWdhV1lnS0dOdmJuUmxiblFwSUh0Y2JpQWdJQ0FnSUNBZ2NtVjBkWEp1SUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJRjlmZEhsd1pWOWZPaUJVWlhoMGRYSmxWVzV3WVdOclpYSXVTVVFzWEc0Z0lDQWdJQ0FnSUNBZ0lDQmpiMjUwWlc1ME9pQmpiMjUwWlc1MFhHNGdJQ0FnSUNBZ0lIMDdYRzRnSUNBZ2ZWeHVJQ0FnSUdWc2MyVWdlMXh1SUNBZ0lDQWdJQ0J5WlhSMWNtNGdiblZzYkR0Y2JpQWdJQ0I5WEc1OU8xeHVYRzVwWmlBb1EwTmZWRVZUVkNrZ2UxeHVJQ0FnSUdOakxsOVVaWE4wTGtwemIyNVZibkJoWTJ0bGNpQTlJRXB6YjI1VmJuQmhZMnRsY2p0Y2JpQWdJQ0JqWXk1ZlZHVnpkQzVVWlhoMGRYSmxWVzV3WVdOclpYSWdQU0JVWlhoMGRYSmxWVzV3WVdOclpYSTdYRzU5WEc1Y2JtMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ2UxeHVJQ0FnSUVwemIyNVZibkJoWTJ0bGNpeGNiaUFnSUNCVVpYaDBkWEpsVlc1d1lXTnJaWElzWEc1OU8xeHVJbDE5Il19